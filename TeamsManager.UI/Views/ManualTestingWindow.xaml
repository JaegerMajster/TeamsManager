<Window x:Class="TeamsManager.UI.Views.ManualTestingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Testy Manualne - TeamsManager"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen"
        Style="{StaticResource BaseWindowStyle}">

    <materialDesign:DialogHost DialogTheme="Inherit">
        <Grid>
            <!-- Grid.ColumnDefinitions MUSI być na początku -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="450" MinWidth="350" MaxWidth="600"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Tło z gradientem -->
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#FF202020" Offset="0"/>
                    <GradientStop Color="#FF252526" Offset="0.5"/>
                    <GradientStop Color="#FF2D2D30" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <!-- Elementy dekoracyjne -->
            <Canvas Margin="100,50,100,50" VerticalAlignment="Top" HorizontalAlignment="Right">
                <Ellipse Width="200" Height="200" Opacity="0.03">
                    <Ellipse.Fill>
                        <RadialGradientBrush>
                            <GradientStop Color="#FF0078D4" Offset="0"/>
                            <GradientStop Color="Transparent" Offset="1"/>
                        </RadialGradientBrush>
                    </Ellipse.Fill>
                </Ellipse>
            </Canvas>

            <!-- Lewy panel - Kategorie testów -->
            <!-- Zmieniono: Usunięto Style="{StaticResource InfoCardStyle}" i dodano bezpośrednie właściwości -->
            <Border Grid.Column="0" Margin="20" Background="{StaticResource BackgroundMedium}" CornerRadius="12" Padding="24">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Nagłówek z przyciskiem Hamburger -->
                    <Grid Grid.Row="0" Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0" Name="HamburgerButton" Style="{StaticResource IconButton}"
                                Click="HamburgerButton_Click" ToolTip="Rozwiń/zwiń wszystkie kategorie">
                            <materialDesign:PackIcon Kind="Menu" Width="24" Height="24"/>
                        </Button>

                        <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="16,0,0,0">
                            <materialDesign:PackIcon Kind="TestTube" Width="24" Height="24"
                                                     VerticalAlignment="Center" Foreground="{StaticResource AccentBlue}"/>
                            <TextBlock Text="Testy Systemu" Style="{StaticResource PageTitleStyle}"
                                       FontSize="20" Margin="8,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <!-- Karta informacji o użytkowniku -->
                    <!-- Zmieniono: Usunięto Style="{StaticResource ChipStyle}" i dodano CornerRadius -->
                    <Border Grid.Row="1" Background="{StaticResource BackgroundDark}"
                            Margin="0,0,0,16" Padding="16,12" CornerRadius="8">
                        <StackPanel>
                            <TextBlock Name="UserInfoText" Text="Użytkownik: Niezalogowany"
                                       Style="{StaticResource MaterialDesignBody2TextBlock}"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Name="SessionInfoText" Text=""
                                       Style="{StaticResource MaterialDesignCaptionTextBlock}"
                                       Foreground="{StaticResource TextSecondary}"/>
                        </StackPanel>
                    </Border>

                    <!-- Karta statystyk -->
                    <Border Grid.Row="2" Background="{StaticResource BackgroundDark}" CornerRadius="8"
                            Padding="16" Margin="0,0,0,16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Name="StatsText"
                                       Text="Łącznie: 0 | ✅ 0 | ❌ 0 | ⚠️ 0 | ⏭️ 0"
                                       Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                       FontWeight="Medium" Margin="0,0,0,8"/>

                            <ProgressBar Grid.Row="1" Name="ProgressBar" Height="8"
                                         Maximum="100" Value="0"/>
                        </Grid>
                    </Border>

                    <!-- ScrollViewer dla kategorii testów -->
                    <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto"
                                  materialDesign:ScrollViewerAssist.IsAutoHideEnabled="True">
                        <StackPanel Name="TestCategoriesPanel">

                            <!-- Kategoria Autentykacja -->
                            <Expander Name="AuthCategoryExpander" IsExpanded="True" Margin="0,4">
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Lock" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="Uwierzytelnianie i Autoryzacja"
                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"/>
                                    </StackPanel>
                                </Expander.Header>
                                <ListBox Name="AuthTestsList"
                                         SelectionChanged="TestCategoryList_SelectionChanged" Tag="Auth"
                                         Background="Transparent" BorderThickness="0">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                                        <TextBlock Text="{Binding ResultIcon}" FontSize="16"
                                                                   Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="{Binding Id}"
                                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                                                   FontWeight="Bold" Margin="0,0,8,0"/>
                                                        <!-- Właściwości ustawione bezpośrednio, usunięto Style="{StaticResource ChipStyle}" -->
                                                        <Border Background="{StaticResource AccentBlue}"
                                                                Padding="8,2" CornerRadius="10">
                                                            <TextBlock Text="{Binding Priority}" FontSize="10"
                                                                       Foreground="White" FontWeight="Medium"/>
                                                        </Border>
                                                    </StackPanel>

                                                    <TextBlock Grid.Row="1" Text="{Binding Name}"
                                                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                               Foreground="{StaticResource TextSecondary}"
                                                               TextWrapping="Wrap" Margin="24,4,0,0"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Expander>

                            <!-- Kategoria API Microsoft Graph -->
                            <Expander Name="GraphApiCategoryExpander" IsExpanded="False" Margin="0,4">
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="GraphOutline" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="API Microsoft Graph"
                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"/>
                                    </StackPanel>
                                </Expander.Header>
                                <ListBox Name="GraphApiTestsList"
                                         SelectionChanged="TestCategoryList_SelectionChanged" Tag="GraphApi"
                                         Background="Transparent" BorderThickness="0">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                                        <TextBlock Text="{Binding ResultIcon}" FontSize="16"
                                                                   Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="{Binding Id}"
                                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                                                   FontWeight="Bold" Margin="0,0,8,0"/>
                                                        <!-- Właściwości ustawione bezpośrednio, usunięto Style="{StaticResource ChipStyle}" -->
                                                        <Border Background="{StaticResource AccentBlue}"
                                                                Padding="8,2" CornerRadius="10">
                                                            <TextBlock Text="{Binding Priority}" FontSize="10"
                                                                       Foreground="White" FontWeight="Medium"/>
                                                        </Border>
                                                    </StackPanel>

                                                    <TextBlock Grid.Row="1" Text="{Binding Name}"
                                                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                               Foreground="{StaticResource TextSecondary}"
                                                               TextWrapping="Wrap" Margin="24,4,0,0"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Expander>

                            <!-- Kategoria PowerShell -->
                            <Expander Name="PowerShellCategoryExpander" IsExpanded="False" Margin="0,4">
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Powershell" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="PowerShell i Automatyzacja"
                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"/>
                                    </StackPanel>
                                </Expander.Header>
                                <ListBox Name="PowerShellTestsList"
                                         SelectionChanged="TestCategoryList_SelectionChanged" Tag="PowerShell"
                                         Background="Transparent" BorderThickness="0">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                                        <TextBlock Text="{Binding ResultIcon}" FontSize="16"
                                                                   Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="{Binding Id}"
                                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                                                   FontWeight="Bold" Margin="0,0,8,0"/>
                                                        <!-- Właściwości ustawione bezpośrednio, usunięto Style="{StaticResource ChipStyle}" -->
                                                        <Border Background="{StaticResource AccentBlue}"
                                                                Padding="8,2" CornerRadius="10">
                                                            <TextBlock Text="{Binding Priority}" FontSize="10"
                                                                       Foreground="White" FontWeight="Medium"/>
                                                        </Border>
                                                    </StackPanel>

                                                    <TextBlock Grid.Row="1" Text="{Binding Name}"
                                                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                               Foreground="{StaticResource TextSecondary}"
                                                               TextWrapping="Wrap" Margin="24,4,0,0"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Expander>

                            <!-- Kategoria Zarządzanie Teams -->
                            <Expander Name="TeamsManagementCategoryExpander" IsExpanded="False" Margin="0,4">
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="MicrosoftTeams" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="Zarządzanie Teams"
                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"/>
                                    </StackPanel>
                                </Expander.Header>
                                <ListBox Name="TeamsManagementTestsList"
                                         SelectionChanged="TestCategoryList_SelectionChanged" Tag="TeamsManagement"
                                         Background="Transparent" BorderThickness="0">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                                        <TextBlock Text="{Binding ResultIcon}" FontSize="16"
                                                                   Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="{Binding Id}"
                                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                                                   FontWeight="Bold" Margin="0,0,8,0"/>
                                                        <!-- Właściwości ustawione bezpośrednio, usunięto Style="{StaticResource ChipStyle}" -->
                                                        <Border Background="{StaticResource AccentBlue}"
                                                                Padding="8,2" CornerRadius="10">
                                                            <TextBlock Text="{Binding Priority}" FontSize="10"
                                                                       Foreground="White" FontWeight="Medium"/>
                                                        </Border>
                                                    </StackPanel>

                                                    <TextBlock Grid.Row="1" Text="{Binding Name}"
                                                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                               Foreground="{StaticResource TextSecondary}"
                                                               TextWrapping="Wrap" Margin="24,4,0,0"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Expander>

                            <!-- Kategoria Interfejs Użytkownika -->
                            <Expander Name="UiCategoryExpander" IsExpanded="False" Margin="0,4">
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Monitor" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                        <TextBlock Text="Interfejs Użytkownika"
                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"/>
                                    </StackPanel>
                                </Expander.Header>
                                <ListBox Name="UiTestsList"
                                         SelectionChanged="TestCategoryList_SelectionChanged" Tag="UI"
                                         Background="Transparent" BorderThickness="0">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                                                        <TextBlock Text="{Binding ResultIcon}" FontSize="16"
                                                                   Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                        <TextBlock Text="{Binding Id}"
                                                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                                                   FontWeight="Bold" Margin="0,0,8,0"/>
                                                        <!-- Właściwości ustawione bezpośrednio, usunięto Style="{StaticResource ChipStyle}" -->
                                                        <Border Background="{StaticResource AccentBlue}"
                                                                Padding="8,2" CornerRadius="10">
                                                            <TextBlock Text="{Binding Priority}" FontSize="10"
                                                                       Foreground="White" FontWeight="Medium"/>
                                                        </Border>
                                                    </StackPanel>

                                                    <TextBlock Grid.Row="1" Text="{Binding Name}"
                                                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                               Foreground="{StaticResource TextSecondary}"
                                                               TextWrapping="Wrap" Margin="24,4,0,0"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Expander>

                        </StackPanel>
                    </ScrollViewer>

                    <!-- Przyciski akcji -->
                    <Grid Grid.Row="4" Margin="0,16,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Button Grid.Row="0" Name="BackToMainBtn" Style="{StaticResource PrimaryActionButton}"
                                Click="BackToMain_Click" Margin="0,0,0,8">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ArrowLeft" Margin="0,0,8,0"/>
                                <TextBlock Text="Powrót do głównego okna"/>
                            </StackPanel>
                        </Button>

                        <Grid Grid.Row="1" Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button Grid.Column="0" Name="LoadTestsBtn" Style="{StaticResource SecondaryActionButton}"
                                    Click="LoadTests_Click" Margin="0,0,4,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Reload" Margin="0,0,8,0"/>
                                    <TextBlock Text="Załaduj"/>
                                </StackPanel>
                            </Button>

                            <Button Grid.Column="1" Name="SaveResultsBtn" Style="{StaticResource SecondaryActionButton}"
                                    Click="SaveResults_Click" Margin="4,0,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="ContentSave" Margin="0,0,8,0"/>
                                    <TextBlock Text="Zapisz"/>
                                </StackPanel>
                            </Button>
                        </Grid>

                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button Grid.Column="0" Name="GenerateReportBtn" Style="{StaticResource SecondaryActionButton}"
                                    Click="GenerateReport_Click" Margin="0,0,4,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="ChartLine" Margin="0,0,8,0"/>
                                    <TextBlock Text="Raport"/>
                                </StackPanel>
                            </Button>

                            <Button Grid.Column="1" Name="OpenReportBtn" Style="{StaticResource SecondaryActionButton}"
                                    Click="OpenReport_Click" Margin="4,0,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="FileDocument" Margin="0,0,8,0"/>
                                    <TextBlock Text="Otwórz"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </Grid>
                </Grid>
            </Border>

            <!-- Separator -->
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"
                          Background="{StaticResource BorderDark}" Opacity="0.5"/>

            <!-- Prawy panel - Szczegóły testu -->
            <!-- Zmieniono: Usunięto Style="{StaticResource InfoCardStyle}" i dodano bezpośrednie właściwości -->
            <Border Grid.Column="2" Margin="20" Background="{StaticResource BackgroundMedium}" CornerRadius="12" Padding="24">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="200"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="120"/>
                    </Grid.RowDefinitions>

                    <!-- Nagłówek testu -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,16">
                        <TextBlock Name="TestTitle" Text="Wybierz test z listy"
                                   Style="{StaticResource PageTitleStyle}" FontSize="24"/>
                        <TextBlock Name="TestDescription" Text=""
                                   Style="{StaticResource InstructionTextStyle}"
                                   TextWrapping="Wrap" Margin="0,8,0,0"/>
                    </StackPanel>

                    <!-- Karta endpointu API -->
                    <Border Grid.Row="1" Name="ApiEndpointPanel" Visibility="Collapsed"
                            Background="{StaticResource BackgroundDark}" CornerRadius="8"
                            Padding="16" Margin="0,0,0,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <materialDesign:PackIcon Kind="Api" Grid.Column="0"
                                                     Width="20" Height="20"
                                                     VerticalAlignment="Center"
                                                     Foreground="{StaticResource AccentBlue}"/>
                            <TextBox Grid.Column="1" Name="ApiEndpointText"
                                     IsReadOnly="True" Background="Transparent"
                                     BorderThickness="0" Margin="12,0,0,0"/>
                        </Grid>
                    </Border>

                    <!-- Kroki testu -->
                    <StackPanel Grid.Row="2">
                        <TextBlock Text="Kroki do wykonania" Style="{StaticResource SectionHeaderStyle}"/>
                        <ScrollViewer MaxHeight="250" VerticalScrollBarVisibility="Auto"
                                      materialDesign:ScrollViewerAssist.IsAutoHideEnabled="True">
                            <ItemsControl Name="TestStepsList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource BackgroundDark}"
                                                CornerRadius="6" Padding="16,12" Margin="0,4">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <Border Grid.Column="0" Width="28" Height="28"
                                                        CornerRadius="14"
                                                        Background="{StaticResource AccentBlue}"
                                                        Margin="0,0,12,0">
                                                    <TextBlock Text="{Binding StepNumber}"
                                                               HorizontalAlignment="Center"
                                                               VerticalAlignment="Center"
                                                               Foreground="White" FontWeight="Bold"/>
                                                </Border>

                                                <TextBlock Grid.Column="1" Text="{Binding StepText}"
                                                           Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                           TextWrapping="Wrap" VerticalAlignment="Center"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>

                    <!-- Oczekiwany rezultat -->
                    <StackPanel Grid.Row="3" Margin="0,16,0,16">
                        <TextBlock Text="Oczekiwany rezultat" Style="{StaticResource SectionHeaderStyle}"/>
                        <Border Background="{StaticResource BackgroundDark}"
                                BorderBrush="{StaticResource AccentBlue}"
                                BorderThickness="1" CornerRadius="8" Padding="16">
                            <TextBlock Name="ExpectedResultText" Text=""
                                       Style="{StaticResource MaterialDesignBody1TextBlock}"
                                       TextWrapping="Wrap"/>
                        </Border>
                    </StackPanel>

                    <!-- Wyniki testu -->
                    <Grid Grid.Row="4" Margin="0,16,0,16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0" Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="Wynik testu"
                                       Style="{StaticResource SectionHeaderStyle}"/>
                            <TextBlock Grid.Column="1" Name="ExecutionStatus" Text=""
                                       Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                       Foreground="{StaticResource AccentBlue}"
                                       Margin="16,0,0,0" VerticalAlignment="Center"/>
                        </Grid>

                        <Border Grid.Row="1" Background="{StaticResource BackgroundDark}"
                                BorderBrush="{StaticResource AccentBlue}"
                                BorderThickness="2" CornerRadius="8">
                            <ScrollViewer VerticalScrollBarVisibility="Auto"
                                          materialDesign:ScrollViewerAssist.IsAutoHideEnabled="True">
                                <TextBox Name="TestResultTextBox"
                                         Background="Transparent" BorderThickness="0"
                                         IsReadOnly="True" TextWrapping="Wrap"
                                         FontFamily="Consolas" FontSize="13"
                                         Text="Tu pojawią się wyniki wykonanych testów automatycznych..."
                                         MinHeight="160" Padding="16"/>
                            </ScrollViewer>
                        </Border>
                    </Grid>

                    <!-- Przyciski oceny wyniku -->
                    <Grid Grid.Row="5" Margin="0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="Oceń wynik:"
                                   Style="{StaticResource MaterialDesignSubtitle2TextBlock}"
                                   VerticalAlignment="Center" Margin="0,0,16,0"/>

                        <UniformGrid Grid.Column="1" Rows="1" Columns="4" HorizontalAlignment="Center">
                            <Button Name="PassBtn" Style="{StaticResource SuccessButton}"
                                    Click="MarkResult_Click" Tag="Pass" Margin="4,0">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="Check" HorizontalAlignment="Center"/>
                                    <TextBlock Text="ZALICZONY" FontSize="10" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="FailBtn" Style="{StaticResource DangerButton}"
                                    Click="MarkResult_Click" Tag="Fail" Margin="4,0">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="Close" HorizontalAlignment="Center"/>
                                    <TextBlock Text="NIEZALICZONY" FontSize="10" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="WarningBtn" Style="{StaticResource WarningButton}"
                                    Click="MarkResult_Click" Tag="Warning" Margin="4,0">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="Alert" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Z UWAGAMI" FontSize="10" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="SkipBtn" Style="{StaticResource SecondaryActionButton}"
                                    Click="MarkResult_Click" Tag="Skip" Margin="4,0">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="SkipNext" HorizontalAlignment="Center"/>
                                    <TextBlock Text="POMINIĘTY" FontSize="10" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Button>
                        </UniformGrid>
                    </Grid>

                    <!-- Sekcja notatek -->
                    <StackPanel Grid.Row="6">
                        <TextBlock Text="Notatki i obserwacje" Style="{StaticResource SectionHeaderStyle}"/>
                        <Border Background="{StaticResource BackgroundDark}"
                                BorderBrush="{StaticResource BorderDark}"
                                BorderThickness="1" CornerRadius="8">
                            <TextBox Name="NotesTextBox"
                                     Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                     AcceptsReturn="True" TextWrapping="Wrap"
                                     VerticalScrollBarVisibility="Auto"
                                     MinHeight="80" Margin="8"
                                     materialDesign:HintAssist.Hint="Wpisz tutaj swoje obserwacje..."
                                     materialDesign:HintAssist.IsFloating="False"/>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Nakładka ładowania -->
            <Grid x:Name="LoadingOverlay" Grid.ColumnSpan="3"
                  Background="{StaticResource BackgroundDark}"
                  Opacity="0.9" Visibility="Collapsed">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                                 IsIndeterminate="True" Width="60" Height="60"/>
                    <TextBlock Text="Wykonywanie testu..."
                               Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                               Foreground="{StaticResource TextPrimary}"
                               Margin="0,16,0,0" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Grid>
    </materialDesign:DialogHost>
</Window>
